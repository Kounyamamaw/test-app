# ğŸ“ Architecture de l'Application

## ğŸ”„ Comparaison : Avant vs AprÃ¨s

### âŒ AVANT - Architecture complexe avec iframes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚                         FRAMER.COM                              â”‚
â”‚                      (Site No-Code)                             â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Page "Espace Membre"                                     â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚                                                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚         IFRAME #1 â†’ INFINITYFREE                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚       (Site hÃ©bergÃ© infinityfree.net)               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  Page Login                                   â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Base de donnÃ©es (comptes)                 â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€ Admin panel                               â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€ Redirection vers dashboard                â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                               â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  Dashboard:                                   â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                       â”‚   â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  IFRAME #2 â†’ PYTHONANYWHERE          â”‚   â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  (Programme Python hÃ©bergÃ©)          â”‚   â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                       â”‚   â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚ Code Python d'analyse          â”‚ â”‚   â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚ (PrÃ©diction cycles financiers) â”‚ â”‚   â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                       â”‚   â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                               â”‚ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                     â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ProblÃ¨mes** :
- ğŸ”´ 3 services diffÃ©rents (Framer, Infinityfree, PythonAnywhere)
- ğŸ”´ 2 iframes imbriquÃ©s (problÃ¨mes de sÃ©curitÃ© et performance)
- ğŸ”´ Latence Ã©levÃ©e (chaque couche ajoute du dÃ©lai)
- ğŸ”´ Difficile Ã  dÃ©bugger (erreurs Ã  diffÃ©rents niveaux)
- ğŸ”´ Gestion complexe des sessions
- ğŸ”´ CoÃ»ts multiples (2 hÃ©bergements)

---

### âœ… APRÃˆS - Architecture simplifiÃ©e avec Flask

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚                         FRAMER.COM                              â”‚
â”‚                      (Site No-Code)                             â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Page "Espace Membre"                                     â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Simple lien ou iframe unique vers :                      â”‚ â”‚
â”‚  â”‚  https://votre-app.onrender.com                           â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚              APPLICATION FLASK UNIQUE                           â”‚
â”‚              (HÃ©bergÃ©e sur Render/Railway)                      â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  ğŸ“„ app.py - Application Flask                            â”‚ â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚  â”œâ”€ ğŸ” Authentification                                   â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€ Login/Logout                                     â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€ Register                                         â”‚ â”‚
â”‚  â”‚  â”‚   â””â”€ Sessions sÃ©curisÃ©es                              â”‚ â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚  â”œâ”€ ğŸ’¾ Base de donnÃ©es (SQLite/PostgreSQL)               â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€ Table Users                                      â”‚ â”‚
â”‚  â”‚  â”‚   â””â”€ Mots de passe hashÃ©s                             â”‚ â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚  â”œâ”€ ğŸ“Š Dashboard Utilisateur                             â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€ Interface d'analyse                              â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€ Formulaire ticker                                â”‚ â”‚
â”‚  â”‚  â”‚   â””â”€ Affichage rÃ©sultats                              â”‚ â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚  â”œâ”€ ğŸ›¡ï¸ Panel Admin                                       â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€ Gestion utilisateurs                             â”‚ â”‚
â”‚  â”‚  â”‚   â”œâ”€ Ajout/Suppression                                â”‚ â”‚
â”‚  â”‚  â”‚   â””â”€ Attribution droits                               â”‚ â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚  â””â”€ ğŸ Module d'analyse (analysis.py)                    â”‚ â”‚
â”‚  â”‚      â”œâ”€ RÃ©cupÃ©ration donnÃ©es (yfinance)                  â”‚ â”‚
â”‚  â”‚      â”œâ”€ Analyse cycles financiers                        â”‚ â”‚
â”‚  â”‚      â”œâ”€ VOTRE CODE PYTHON ICI                            â”‚ â”‚
â”‚  â”‚      â””â”€ Retour JSON (prÃ©diction, confiance, cycle)       â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Avantages** :
- âœ… Un seul service (Flask sur Render/Railway)
- âœ… ZÃ©ro ou une seule iframe
- âœ… Latence minimale
- âœ… Facile Ã  dÃ©bugger (tout au mÃªme endroit)
- âœ… Sessions unifiÃ©es et sÃ©curisÃ©es
- âœ… Un seul coÃ»t d'hÃ©bergement (souvent gratuit)
- âœ… Architecture standard et professionnelle

---

## ğŸ—ï¸ Structure interne de l'application Flask

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     APPLICATION FLASK                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸŒ ROUTES (app.py)                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  PUBLIC                                                   â”‚ â”‚
â”‚  â”‚  â”œâ”€ / (index)           â†’ Page d'accueil                 â”‚ â”‚
â”‚  â”‚  â”œâ”€ /login              â†’ Connexion                       â”‚ â”‚
â”‚  â”‚  â”œâ”€ /register           â†’ Inscription                     â”‚ â”‚
â”‚  â”‚  â””â”€ /logout             â†’ DÃ©connexion                     â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  PROTECTED (login_required)                               â”‚ â”‚
â”‚  â”‚  â”œâ”€ /dashboard          â†’ Dashboard utilisateur          â”‚ â”‚
â”‚  â”‚  â””â”€ /analyze (POST)     â†’ API analyse (JSON)             â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  ADMIN (admin_required)                                   â”‚ â”‚
â”‚  â”‚  â”œâ”€ /admin              â†’ Panel admin                     â”‚ â”‚
â”‚  â”‚  â”œâ”€ /admin/add_user     â†’ Ajouter utilisateur            â”‚ â”‚
â”‚  â”‚  â”œâ”€ /admin/delete_user  â†’ Supprimer utilisateur          â”‚ â”‚
â”‚  â”‚  â””â”€ /admin/toggle_admin â†’ Basculer droits admin          â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  ğŸ’¾ BASE DE DONNÃ‰ES (SQLite/PostgreSQL)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Table: users                                             â”‚ â”‚
â”‚  â”‚  â”œâ”€ id (primary key)                                      â”‚ â”‚
â”‚  â”‚  â”œâ”€ username (unique)                                     â”‚ â”‚
â”‚  â”‚  â”œâ”€ email (unique)                                        â”‚ â”‚
â”‚  â”‚  â”œâ”€ password_hash                                         â”‚ â”‚
â”‚  â”‚  â”œâ”€ is_admin (boolean)                                    â”‚ â”‚
â”‚  â”‚  â””â”€ created_at (datetime)                                 â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  ğŸ¨ TEMPLATES (HTML + Jinja2)                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  base.html      â†’ Template de base (navbar, styles)      â”‚ â”‚
â”‚  â”‚  index.html     â†’ Page d'accueil                          â”‚ â”‚
â”‚  â”‚  login.html     â†’ Formulaire de connexion                â”‚ â”‚
â”‚  â”‚  register.html  â†’ Formulaire d'inscription               â”‚ â”‚
â”‚  â”‚  dashboard.html â†’ Interface d'analyse + rÃ©sultats        â”‚ â”‚
â”‚  â”‚  admin.html     â†’ Gestion des utilisateurs               â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  ğŸ MODULE D'ANALYSE (analysis.py)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  analyze_stock(ticker) â†’ dict                             â”‚ â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚
â”‚  â”‚  â”œâ”€ 1. RÃ©cupÃ©ration donnÃ©es (yfinance)                   â”‚ â”‚
â”‚  â”‚  â”œâ”€ 2. Calculs / Algorithme ML                           â”‚ â”‚
â”‚  â”‚  â”œâ”€ 3. DÃ©tection cycles                                  â”‚ â”‚
â”‚  â”‚  â””â”€ 4. Retour rÃ©sultats                                  â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Retour JSON :                                            â”‚ â”‚
â”‚  â”‚  {                                                        â”‚ â”‚
â”‚  â”‚    "success": true,                                       â”‚ â”‚
â”‚  â”‚    "ticker": "AAPL",                                      â”‚ â”‚
â”‚  â”‚    "prediction": "Cycle haussier",                        â”‚ â”‚
â”‚  â”‚    "confidence": 0.85,                                    â”‚ â”‚
â”‚  â”‚    "next_cycle": "15 jours"                               â”‚ â”‚
â”‚  â”‚  }                                                        â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Flux de donnÃ©es - Exemple d'analyse

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Utilisateur  â”‚
â”‚ (Dashboard)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Entre "AAPL" dans le formulaire
       â”‚    et clique sur "Analyser"
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend (dashboard.html)             â”‚
â”‚  â”œâ”€ JavaScript capture le formulaire   â”‚
â”‚  â”œâ”€ Envoie requÃªte POST Ã  /analyze     â”‚
â”‚  â””â”€ Avec ticker = "AAPL"               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ 2. POST /analyze
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend Flask (app.py)                â”‚
â”‚  â”œâ”€ Route: @app.route('/analyze')      â”‚
â”‚  â”œâ”€ VÃ©rifie: @login_required           â”‚
â”‚  â”œâ”€ RÃ©cupÃ¨re: ticker = "AAPL"          â”‚
â”‚  â””â”€ Appelle: analyze_stock("AAPL")     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ 3. Appel fonction
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Module d'analyse (analysis.py)        â”‚
â”‚  â”œâ”€ TÃ©lÃ©charge donnÃ©es (yfinance)      â”‚
â”‚  â”œâ”€ Calcule indicateurs                â”‚
â”‚  â”œâ”€ Applique algorithme                â”‚
â”‚  â”œâ”€ DÃ©tecte cycle                      â”‚
â”‚  â””â”€ Retourne rÃ©sultats                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ 4. JSON response
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend Flask                         â”‚
â”‚  â””â”€ Retourne JSON via jsonify()        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ 5. JSON reÃ§u
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend (JavaScript)                 â”‚
â”‚  â”œâ”€ ReÃ§oit les donnÃ©es                 â”‚
â”‚  â”œâ”€ Parse le JSON                      â”‚
â”‚  â”œâ”€ Met Ã  jour l'interface             â”‚
â”‚  â””â”€ Affiche : prÃ©diction, confiance... â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ 6. RÃ©sultats affichÃ©s
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Utilisateur  â”‚
â”‚ voit les     â”‚
â”‚ rÃ©sultats    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”’ SÃ©curitÃ© - Flux d'authentification

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Utilisateur  â”‚
â”‚ (Non connectÃ©)â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. AccÃ¨de Ã  /login
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Page Login                            â”‚
â”‚  â”œâ”€ Formulaire username + password     â”‚
â”‚  â””â”€ Submit POST /login                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ 2. POST /login
             â”‚    {username: "alice", password: "pass123"}
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend Flask                         â”‚
â”‚  â”œâ”€ Cherche user dans DB               â”‚
â”‚  â”œâ”€ VÃ©rifie password_hash              â”‚
â”‚  â”‚   (check_password_hash)             â”‚
â”‚  â””â”€ Si OK :                            â”‚
â”‚      â”œâ”€ CrÃ©e session['user_id']        â”‚
â”‚      â”œâ”€ session['username']            â”‚
â”‚      â”œâ”€ session['is_admin']            â”‚
â”‚      â””â”€ Redirect selon rÃ´le            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚
    â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ is_adminâ”‚      â”‚ Utilisateurâ”‚
â”‚ = True  â”‚      â”‚ standard   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
     â”‚                 â”‚
     â”‚ /admin          â”‚ /dashboard
     â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Panel    â”‚      â”‚ Dashboard    â”‚
â”‚ Admin    â”‚      â”‚ Analyse      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Toutes les pages protÃ©gÃ©es vÃ©rifient :
if 'user_id' not in session:
    redirect('/login')
```

---

## ğŸ“Š Performance - Comparaison des temps de rÃ©ponse

### âŒ AVANT (avec iframes)

```
Temps total : ~3-5 secondes
â”œâ”€ Framer charge       : 500ms
â”œâ”€ Iframe 1 charge     : 800ms
â”‚  â””â”€ Infinityfree DNS : 300ms
â”‚  â””â”€ Page load        : 500ms
â”œâ”€ Iframe 2 charge     : 1200ms
â”‚  â””â”€ PythonAnywhere   : 400ms
â”‚  â””â”€ Code Python      : 800ms
â””â”€ Rendu final        : 500ms
```

### âœ… APRÃˆS (Flask unique)

```
Temps total : ~1-2 secondes
â”œâ”€ Framer charge       : 500ms
â”œâ”€ Flask app           : 300ms
â”‚  â””â”€ Authentification : 100ms
â”‚  â””â”€ Code Python      : 800ms
â””â”€ Rendu final        : 200ms
```

**AmÃ©lioration : 50-60% plus rapide ! âš¡**

---

## ğŸ¯ Conclusion

### Avantages de la nouvelle architecture :

1. **SimplicitÃ©** : Une seule application au lieu de 3 services
2. **Performance** : 50% plus rapide
3. **SÃ©curitÃ©** : Pas d'iframes imbriquÃ©s, sessions unifiÃ©es
4. **Maintenance** : Code centralisÃ©, debugging facile
5. **CoÃ»t** : Un seul hÃ©bergement (souvent gratuit)
6. **ScalabilitÃ©** : Facile Ã  amÃ©liorer et Ã©tendre

### PrÃªt pour :
- âœ… DÃ©veloppement local
- âœ… Tests
- âœ… DÃ©ploiement production
- âœ… IntÃ©gration avec Framer
- âœ… Ã‰volutions futures

**Architecture professionnelle et pÃ©renne ! ğŸš€**
